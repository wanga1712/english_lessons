# üì° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ API –¥–ª—è –∫–∞—Ä—Ç—ã –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π

## –ß—Ç–æ —Ç–∞–∫–æ–µ API?

API (Application Programming Interface) - —ç—Ç–æ –∞–¥—Ä–µ—Å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç: `http://127.0.0.1:8000/uchi/`
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å JavaScript –∫–æ–¥–æ–º

### 2. JavaScript –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API
```javascript
// –í —Ñ–∞–π–ª–µ home_uchi_simple.html, —Å—Ç—Ä–æ–∫–∞ 291:
const response = await fetch('/api/lessons/');
```

### 3. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
**–ê–¥—Ä–µ—Å API:** `/api/lessons/`

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "lessons": [
    {
      "id": 1,
      "title": "Weather, Actions and Colors",
      "description": "–£—Ä–æ–∫ –æ –ø–æ–≥–æ–¥–µ, –¥–µ–π—Å—Ç–≤–∏—è—Ö –∏ —Ü–≤–µ—Ç–∞—Ö",
      "cards_count": 36,
      "user_completed": false,
      "progress": {
        "cards_completed": 0,
        "cards_total": 36,
        "completion_percent": 0
      }
    },
    {
      "id": 2,
      "title": "–î—Ä—É–≥–æ–π —É—Ä–æ–∫",
      ...
    }
  ]
}
```

### 4. JavaScript –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
- –ë–µ—Ä–µ—Ç –º–∞—Å—Å–∏–≤ `lessons` –∏–∑ –æ—Ç–≤–µ—Ç–∞
- –°–æ–∑–¥–∞–µ—Ç —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–∫–∞
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ —É—Ä–æ–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã, –∫–∞–∫–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã, –∫–∞–∫–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã

## –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–æ–¥ API?

**–§–∞–π–ª:** `lessons/views_api.py`
**–§—É–Ω–∫—Ü–∏—è:** `list_lessons(request)`
**URL:** `/api/lessons/` (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ `english_lessons/urls.py`)

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç API?

1. **–ü–æ–ª—É—á–∞–µ—Ç —É—Ä–æ–∫–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
   ```python
   lessons = Lesson.objects.select_related('video').prefetch_related('cards').order_by('created_at')
   ```

2. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –ö–∞–∫–∏–µ —É—Ä–æ–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
   - –°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
   - –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

3. **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON:**
   ```python
   return JsonResponse({'lessons': lessons_data})
   ```

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å API –≤—Ä—É—á–Ω—É—é?

### –í –±—Ä–∞—É–∑–µ—Ä–µ:
–û—Ç–∫—Ä–æ–π—Ç–µ: `http://127.0.0.1:8000/api/lessons/`

–í—ã —É–≤–∏–¥–∏—Ç–µ JSON —Å —É—Ä–æ–∫–∞–º–∏.

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
fetch('/api/lessons/')
  .then(r => r.json())
  .then(data => console.log(data));
```

## –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:

```
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL/SQLite)
    ‚Üì
Django View (lessons/views_api.py)
    ‚Üì
JSON –æ—Ç–≤–µ—Ç: {"lessons": [...]}
    ‚Üì
JavaScript fetch('/api/lessons/')
    ‚Üì
–ú–∞—Å—Å–∏–≤ lessons –≤ JavaScript
    ‚Üì
–§—É–Ω–∫—Ü–∏—è renderMap() —Å–æ–∑–¥–∞–µ—Ç —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
    ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–∞—Ä—Ç—É —Å —É—Ä–æ–∫–∞–º–∏
```

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:

### –ï—Å–ª–∏ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –µ—Å—Ç—å —É—Ä–æ–∫–∏ –≤ –ë–î

### –ï—Å–ª–∏ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤:
- –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç —É—Ä–æ–∫–æ–≤
- –ù—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è

### –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `renderMap()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

